{% extends 'base.html' %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-12 col-xl-11">
        <div class="card shadow-lg border-0 mt-4">
            <div class="card-header bg-primary text-white d-flex justify-content-between align-items-center py-3">
                <h5 class="mb-0 fw-bold"><i class="fa-solid fa-file-invoice-dollar me-2"></i> Ingreso de Calificación Tributaria</h5>
                <span class="badge bg-light text-primary">HDU 1.1</span>
            </div>
            
            <div class="card-body p-4">
                {% if messages %}
                    {% for message in messages %}
                        <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                            {{ message }}
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                        </div>
                    {% endfor %}
                {% endif %}

                <form method="POST">
                    {% csrf_token %}

                    <h6 class="text-uppercase fw-bold text-secondary border-bottom pb-2 mb-3">
                        <i class="fa-solid fa-circle-info me-1"></i> Datos del Instrumento
                    </h6>
                    
                    <div class="row g-3 mb-4">
                        <div class="col-md-3">
                            <label class="form-label small fw-bold text-muted">RUT Cliente</label>
                            <input type="text" name="rut" class="form-control" placeholder="Ej: 76.xxx.xxx-K" required>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label small fw-bold text-muted">Razón Social</label>
                            <input type="text" name="razon_social" class="form-control" required>
                        </div>
                        <div class="col-md-2">
                            <label class="form-label small fw-bold text-muted">Ejercicio</label>
                            <input type="number" name="ejercicio" class="form-control" value="2025" required>
                        </div>
                        <div class="col-md-2">
                            <label class="form-label small fw-bold text-muted">Mercado</label>
                            <input type="text" name="mercado" class="form-control" placeholder="ACN" required>
                        </div>
                        <div class="col-md-2">
                            <label class="form-label small fw-bold text-muted">Tipo Soc.</label>
                            <select name="tipo_sociedad" class="form-select">
                                <option value="A">Abierta (A)</option>
                                <option value="C">Cerrada (C)</option>
                            </select>
                        </div>

                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-muted">Instrumento</label>
                            <input type="text" name="instrumento" class="form-control" required>
                        </div>
                        <div class="col-md-4">
                            <label class="form-label small fw-bold text-muted">Descripción</label>
                            <input type="text" name="descripcion" class="form-control" placeholder="Ej: Dividendo Provisorio">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label small fw-bold text-muted">Secuencia</label>
                            <input type="number" name="secuencia" class="form-control" value="0">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label small fw-bold text-muted">N° Dividendo</label>
                            <input type="number" name="numero_dividendo" class="form-control" value="0">
                        </div>

                        <div class="col-md-3">
                            <label class="form-label small fw-bold text-muted">Fecha Pago</label>
                            <input type="date" name="fecha_pago" class="form-control" required>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label small fw-bold text-muted">Valor Histórico</label>
                            <div class="input-group">
                                <span class="input-group-text">$</span>
                                <input type="number" step="0.01" name="valor_historico" class="form-control" placeholder="0.00">
                            </div>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label small fw-bold text-muted">Factor Actualiz.</label>
                            <input type="number" step="0.00000001" name="factor_actualizacion" class="form-control" value="0.0">
                        </div>
                    </div>

                    <h6 class="text-uppercase fw-bold text-secondary border-bottom pb-2 mb-3 mt-4">
                        <i class="fa-solid fa-percent me-1"></i> Tabla de Factores (8 - 37)
                    </h6>

                    <div class="row g-2 mb-4 bg-light p-3 rounded border">
                        <div class="col-12 mb-2"><small class="text-muted"><i class="fa-solid fa-triangle-exclamation"></i> Ingrese los factores con hasta 8 decimales.</small></div>
                        
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 8</label><input type="number" step="0.00000001" name="factor_8" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 9</label><input type="number" step="0.00000001" name="factor_9" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 10</label><input type="number" step="0.00000001" name="factor_10" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 11</label><input type="number" step="0.00000001" name="factor_11" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 12</label><input type="number" step="0.00000001" name="factor_12" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 13</label><input type="number" step="0.00000001" name="factor_13" class="form-control form-control-sm"></div>
                        
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 14</label><input type="number" step="0.00000001" name="factor_14" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 15</label><input type="number" step="0.00000001" name="factor_15" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 16</label><input type="number" step="0.00000001" name="factor_16" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 17</label><input type="number" step="0.00000001" name="factor_17" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 18</label><input type="number" step="0.00000001" name="factor_18" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 19</label><input type="number" step="0.00000001" name="factor_19" class="form-control form-control-sm"></div>
                        
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 20</label><input type="number" step="0.00000001" name="factor_20" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 21</label><input type="number" step="0.00000001" name="factor_21" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 22</label><input type="number" step="0.00000001" name="factor_22" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 23</label><input type="number" step="0.00000001" name="factor_23" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 24</label><input type="number" step="0.00000001" name="factor_24" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 25</label><input type="number" step="0.00000001" name="factor_25" class="form-control form-control-sm"></div>
                        
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 26</label><input type="number" step="0.00000001" name="factor_26" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 27</label><input type="number" step="0.00000001" name="factor_27" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 28</label><input type="number" step="0.00000001" name="factor_28" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 29</label><input type="number" step="0.00000001" name="factor_29" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 30</label><input type="number" step="0.00000001" name="factor_30" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 31</label><input type="number" step="0.00000001" name="factor_31" class="form-control form-control-sm"></div>
                        
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 32</label><input type="number" step="0.00000001" name="factor_32" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 33</label><input type="number" step="0.00000001" name="factor_33" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 34</label><input type="number" step="0.00000001" name="factor_34" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 35</label><input type="number" step="0.00000001" name="factor_35" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 36</label><input type="number" step="0.00000001" name="factor_36" class="form-control form-control-sm"></div>
                        <div class="col-6 col-md-3 col-lg-2"><label class="x-small">Factor 37</label><input type="number" step="0.00000001" name="factor_37" class="form-control form-control-sm"></div>
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                        <a href="{% url 'dashboard' %}" class="btn btn-outline-secondary px-4">Cancelar</a>
                        <button type="submit" class="btn btn-primary px-5 shadow">
                            <i class="fa-solid fa-save me-2"></i> Guardar Calificación
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}